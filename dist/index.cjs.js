"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react");function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _iterableToArrayLimit(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var u,o=t[Symbol.iterator]();!(n=(u=o.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var useAnimation=function(t){var e=_slicedToArray(react.useState(!1),2),r=e[0],n=e[1],i=_slicedToArray(react.useState(!1),2),a=i[0],u=i[1],o=_slicedToArray(react.useState(!1),2),c=o[0],s=o[1],l=_slicedToArray(react.useState(!1),2),f=l[0],y=l[1],m=react.useCallback(function(e){e.target===t&&(y(!1),r||u(!1))},[r]);react.useEffect(function(){return t&&t.addEventListener("transitionend",m,!1),function(){t&&t.removeEventListener("transitionend",m)}},[m]),react.useEffect(function(){a&&setTimeout(function(){s(!0)},10)},[a]);var b=react.useCallback(function(t){t!==r&&(f&&(u(r),s(r),y(!1)),setTimeout(function(){n(t),y(!0),t?u(!0):s(!1)},10))},[r,f]);return[a,c,b]},waitingObj={},timer=null,trailingTimer=null,isFirst=!0,lastTime=0,useAsyncDebounce=function(t,e,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=_slicedToArray(react.useState(0),2),o=u[0],c=u[1],s=react.useCallback(t,e),l=react.useCallback(r,n),f=a.leading,y=a.trailing,m=a.maxWait,b=react.useCallback(function(){if(s&&(i||!waitingObj[t])){waitingObj[t]=!0;var e=s.apply(void 0,arguments);e&&e.then?(c(function(t){return t+1}),e.then(function(t){return t},function(t){return t}).then(function(e){e&&l(e),waitingObj[t]=!1,c(function(t){return t-1})})):waitingObj[t]=!1}},[i,waitingObj,s,l]);return[o>0,react.useCallback(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(i){var a=(new Date).getTime();timer&&clearTimeout(timer),f&&isFirst&&(isFirst=!1,b.apply(void 0,r)),m>0&&a-lastTime>m&&(0!==lastTime&&b.apply(void 0,r),lastTime=a),timer=setTimeout(function(){lastTime=0,b.apply(void 0,r),timer=null,isFirst=!0},i),y&&(trailingTimer&&(clearTimeout(trailingTimer),trailingTimer=null),trailingTimer=setTimeout(function(){b.apply(void 0,_toConsumableArray(e)),trailingTimer=null},i))}else b.apply(void 0,r)},[b,lastTime,timer,isFirst])]},waiting=!1,useAsync=function(t,e,r,n){var i=_slicedToArray(react.useState(!1),2),a=i[0],u=i[1],o=react.useCallback(t,e),c=react.useCallback(r,n);return[a,react.useCallback(function(){if(!waiting&&o){waiting=!0;var t=o.apply(void 0,arguments);t&&t.then?(u(!0),t.then(function(t){return t},function(t){return t}).then(function(t){t&&c(t),waiting=!1,u(!1)})):waiting=!1}},[waiting,o,u])]},useCountdown=function(){var t=_slicedToArray(react.useState(0),2),e=t[0],r=t[1];return react.useEffect(function(){if(0===e)return function(){};var t=setInterval(function(){r(function(t){return t>0?t-1:0})},1e3);return function(){clearInterval(t)}},[e]),[e,r]},useInput=function(t,e){var r=_slicedToArray(react.useState(t),2),n=r[0],i=r[1],a=_slicedToArray(react.useState(!1),2),u=a[0],o=a[1],c=react.useCallback(function(){e instanceof RegExp?o(!e.test(n)):e instanceof Function&&o(e(n))},[e,n]);return[n,i,u,c]};exports.useAnimation=useAnimation,exports.useAsyncDebounce=useAsyncDebounce,exports.useAsync=useAsync,exports.useCountdown=useCountdown,exports.useInput=useInput;
