"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react");function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var useAnimation=function(e){var t=_slicedToArray(react.useState(!1),2),n=t[0],r=t[1],i=_slicedToArray(react.useState(!1),2),a=i[0],o=i[1],u=_slicedToArray(react.useState(!1),2),c=u[0],s=u[1],l=_slicedToArray(react.useState(!1),2),f=l[0],y=l[1],d=react.useCallback(function(t){t.target===e&&(y(!1),n||o(!1))},[n]);react.useEffect(function(){return e&&e.addEventListener("transitionend",d,!1),function(){e&&e.removeEventListener("transitionend",d)}},[d]),react.useEffect(function(){a&&setTimeout(function(){s(!0)},10)},[a]);var m=react.useCallback(function(e){e!==n&&(f&&(o(n),s(n),y(!1)),setTimeout(function(){r(e),y(!0),e?o(!0):s(!1)},10))},[n,f]);return[a,c,m]},waitingObj={},timer=null,trailingTimer=null,isFirst=!0,lastTime=0,useAsyncDebounce=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=_slicedToArray(react.useState(0),2),u=o[0],c=o[1],s=react.useCallback(e,t),l=react.useCallback(n,r),f=a.leading,y=a.trailing,d=a.maxWait,m=react.useCallback(function(){if(s&&(i||!waitingObj[e])){waitingObj[e]=!0;var t=s.apply(void 0,arguments);t&&t.then?(c(function(e){return e+1}),t.then(function(e){return e},function(e){return e}).then(function(t){t&&l(t),waitingObj[e]=!1,c(function(e){return e-1})})):waitingObj[e]=!1}},[i,waitingObj,s,l]);return[u>0,react.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(i){var a=(new Date).getTime();timer&&clearTimeout(timer),f&&isFirst&&(isFirst=!1,m.apply(void 0,n)),d>0&&a-lastTime>d&&(0!==lastTime&&m.apply(void 0,n),lastTime=a),timer=setTimeout(function(){lastTime=0,m.apply(void 0,n),timer=null,isFirst=!0},i),y&&(trailingTimer&&(clearTimeout(trailingTimer),trailingTimer=null),trailingTimer=setTimeout(function(){m.apply(void 0,_toConsumableArray(t)),trailingTimer=null},i))}else m.apply(void 0,n)},[m,lastTime,timer,isFirst])]},waiting=!1,useAsync=function(e,t,n,r){var i=_slicedToArray(react.useState(!1),2),a=i[0],o=i[1],u=react.useCallback(e,t),c=react.useCallback(n,r);return[a,react.useCallback(function(){if(!waiting&&u){waiting=!0;var e=u.apply(void 0,arguments);e&&e.then?(o(!0),e.then(function(e){return e},function(e){return e}).then(function(e){e&&c(e),waiting=!1,o(!1)})):waiting=!1}},[waiting,u,o])]},useCountdown=function(){var e=_slicedToArray(react.useState(0),2),t=e[0],n=e[1];return react.useEffect(function(){if(0===t)return function(){};var e=setInterval(function(){n(function(e){return e>0?e-1:0})},1e3);return function(){clearInterval(e)}},[t]),[t,n]},useInput=function(e,t){var n=_slicedToArray(react.useState(e),2),r=n[0],i=n[1],a=_slicedToArray(react.useState(!1),2),o=a[0],u=a[1],c=react.useCallback(function(){t instanceof RegExp?u(!t.test(r)):t instanceof Function&&u(t(r))},[t,r]);return[r,i,o,c]},useKeyDown=function(e,t){var n=_slicedToArray(react.useState(function(){return t&&"function"==typeof t?t:function(){}}),2),r=n[0],i=n[1],a=_slicedToArray(react.useState(!1),2),o=a[0],u=a[1];return react.useEffect(function(){var t=function(t){if(r&&"function"==typeof r){if(e===t.key)return void r(t.key);if(e===t.code)return void r(t.code);e===t.keyCode&&r(t.keyCode)}};return o&&window.addEventListener("keydown",t,!1),function(){o&&window.removeEventListener("keydown",t)}},[e,o,r]),[react.useCallback(function(){u(!0)},[]),react.useCallback(function(){u(!1)},[]),react.useCallback(function(e){e&&"function"==typeof e&&i(function(){return e})},[])]};exports.useAnimation=useAnimation,exports.useAsyncDebounce=useAsyncDebounce,exports.useAsync=useAsync,exports.useCountdown=useCountdown,exports.useInput=useInput,exports.useKeyDown=useKeyDown;
