import{useState as t,useCallback as n,useEffect as e}from"react";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,a=!1,o=void 0;try{for(var i,f=t[Symbol.iterator]();!(r=(i=f.next()).done)&&(e.push(i.value),!n||e.length!==n);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==f.return||f.return()}finally{if(a)throw o}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function(r){var o=a(t(!1),2),i=o[0],f=o[1],u=a(t(!1),2),c=u[0],s=u[1],l=a(t(!1),2),d=l[0],v=l[1],p=a(t(!1),2),g=p[0],y=p[1],m=n(function(t){t.target===r&&(y(!1),i||s(!1))},[i]);e(function(){return r&&r.addEventListener("transitionend",m,!1),function(){r&&r.removeEventListener("transitionend",m)}},[m]),e(function(){c&&setTimeout(function(){v(!0)},10)},[c]);var h=n(function(t){t!==i&&(g&&(s(i),v(i),y(!1)),setTimeout(function(){f(t),y(!0),t?s(!0):v(!1)},10))},[i,g]);return[c,d,h]},f={},u=null,c=null,s=!0,l=0,d=function(e,r,i,d,v){var p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},g=a(t(0),2),y=g[0],m=g[1],h=n(e,r),L=n(i,d),b=p.leading,T=p.trailing,w=p.maxWait,S=n(function(){if(h&&(v||!f[e])){f[e]=!0;var t=h.apply(void 0,arguments);t&&t.then?(m(function(t){return t+1}),t.then(function(t){return t},function(t){return t}).then(function(t){t&&L(t),f[e]=!1,m(function(t){return t-1})})):f[e]=!1}},[v,f,h,L]);return[y>0,n(function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(v){var a=(new Date).getTime();u&&clearTimeout(u),b&&s&&(s=!1,S.apply(void 0,n)),w>0&&a-l>w&&(0!==l&&S.apply(void 0,n),l=a),u=setTimeout(function(){l=0,S.apply(void 0,n),u=null,s=!0},v),T&&(c&&(clearTimeout(c),c=null),c=setTimeout(function(){S.apply(void 0,o(r)),c=null},v))}else S.apply(void 0,n)},[S,l,u,s])]},v=!1,p=function(e,r,o,i){var f=a(t(!1),2),u=f[0],c=f[1],s=n(e,r),l=n(o,i);return[u,n(function(){if(!v&&s){v=!0;var t=s.apply(void 0,arguments);t&&t.then?(c(!0),t.then(function(t){return t},function(t){return t}).then(function(t){t&&l(t),v=!1,c(!1)})):v=!1}},[v,s,c])]},g=function(){var n=a(t(0),2),r=n[0],o=n[1];return e(function(){if(0===r)return function(){};var t=setInterval(function(){o(function(t){return t>0?t-1:0})},1e3);return function(){clearInterval(t)}},[r]),[r,o]},y=function(e,r){var o=a(t(e),2),i=o[0],f=o[1],u=a(t(!1),2),c=u[0],s=u[1],l=n(function(){r instanceof RegExp?s(!r.test(i)):r instanceof Function&&s(r(i))},[r,i]);return[i,f,c,l]},m=function(r,o){var i=a(t(function(){return o&&"function"==typeof o?o:function(){}}),2),f=i[0],u=i[1],c=a(t(!1),2),s=c[0],l=c[1];return e(function(){var t=function(t){if(f&&"function"==typeof f){if(r===t.key)return void f(t.key);if(r===t.code)return void f(t.code);r===t.keyCode&&f(t.keyCode)}};return s&&window.addEventListener("keydown",t,!1),function(){s&&window.removeEventListener("keydown",t)}},[r,s,f]),[n(function(){l(!0)},[]),n(function(){l(!1)},[]),n(function(t){t&&"function"==typeof t&&u(function(){return t})},[])]},h=function(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=i.namespace,u=i.dragStyle,c=i.dragData,s=i.droppingStyle,l=i.dropHandler,d=a(t(),2),v=d[0],p=d[1],g=a(t(function(){return c}),2),y=g[0],m=g[1],h=a(t(function(){return l||function(){}}),2),L=h[0],b=h[1],T=n(function(t){p(t)},[]),w=n(function(t){b(function(){return t})},[]),S=n(function(t){m(function(){return t})},[]),E=n(function(t){for(var n=t.target,e=0,r=0;n&&n!==v;)n.offsetParent?(e+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent):n=n.parentElement;var a=e+t.offsetX,o=r+t.offsetY;return[a<v.clientWidth/2,o<v.clientHeight/2]},[v]),j=n(function(t,n,e){if(v){var r=!n,a=!e,o=t.basic,i=t.left,f=t.right,u=t.top,c=t.bottom,s=t.leftTop,l=t.leftBottom,d=t.rightTop,p=t.rightBottom;o&&v.classList.add(o),i&&(n?v.classList.add(i):v.classList.remove(i)),f&&(r?v.classList.add(f):v.classList.remove(f)),u&&(e?v.classList.add(u):v.classList.remove(u)),c&&(a?v.classList.add(c):v.classList.remove(c)),s&&(n&&e?v.classList.add(s):v.classList.remove(s)),l&&(n&&a?v.classList.add(l):v.classList.remove(l)),d&&(r&&e?v.classList.add(d):v.classList.remove(d)),p&&(r&&a?v.classList.add(p):v.classList.remove(p))}},[v]);return e(function(){if(!v)return function(){};var t=function(t){return function(n){if("dragover"!==t&&"drop"!==t||n.preventDefault(),"dragstart"===t)if(n.target.dataset.dragging=!0,u&&"string"==typeof u?n.target.classList.add(u):"function"==typeof u&&u(n.target),"function"==typeof y){var e=y(n.target,n);if(e){var o=JSON.stringify({namespace:f,data:e});n.dataTransfer.setData("text/plain",o)}}else if(y){var i=JSON.stringify({namespace:f,data:y});n.dataTransfer.setData("text/plain",i)}if("dragend"===t&&(delete n.target.dataset.dragging,u&&"string"==typeof u?n.target.classList.remove(u):"function"==typeof u&&u(n.target),n.dataTransfer.setData("text/plain",null)),"dragover"===t){if(v.dataset.dragging)return;var c=a(E(n),2),l=c[0],d=c[1];s&&"string"==typeof s?v.classList.add(s):"object"===r(s)?j(s,l,d):"function"==typeof s&&s(v,"over")}if("dragleave"===t){if(v.dataset.dragging)return;s&&"string"==typeof s?v.classList.remove(s):"object"===r(s)?Object.values(s).map(function(t){return v.classList.remove(t)}):"function"==typeof s&&s(v,"leave")}if("drop"===t){if(v.dataset.dragging)return;s&&"string"==typeof s?v.classList.remove(s):"object"===r(s)?Object.values(s).map(function(t){return v.classList.remove(t)}):"function"==typeof s&&s(v,"leave");var p=n.dataTransfer.getData("text");try{p=JSON.parse(p)}catch(t){return}if(!p||p.namespace!==f)return;var g=a(E(n),2),m=g[0],h=g[1],b=p.data;L&&"function"==typeof L&&L(b,{isLeft:m,isTop:h},v)}}},n=["dragstart","dragend"],e=["dragleave","dragover","drop"],i=[];switch(o){case"drag":i.push.apply(i,n),v.draggable=!0;break;case"drop":i.push.apply(i,e);break;case"drag-n-drop":i.push.apply(i,n.concat(e)),v.draggable=!0}var c=i.map(function(n){return{eventName:n,handler:t(n)}});return c.forEach(function(t){var n=t.eventName,e=t.handler;v.addEventListener(n,e,!1)}),function(){c.forEach(function(t){var n=t.eventName,e=t.handler;v.removeEventListener(n,e)})}},[v,y,L]),[T,w,S]};export{i as useAnimation,d as useAsyncDebounce,p as useAsync,g as useCountdown,y as useInput,m as useKeyDown,h as useDragNDrop};
